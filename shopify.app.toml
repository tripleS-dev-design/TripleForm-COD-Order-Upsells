# Learn more about configuring your app at
# https://shopify.dev/docs/apps/tools/cli/configuration

name = "Tripleform-COD"
client_id = "ac6bf0c04b992f852be8538ab90a4691"
handle = "tripleform-cod"

# ðŸ”´ OBLIGATOIRE pour que Shopify accepte les webhooks
application_url = "https://tripleform-cod-order-upsells.onrender.com"
embedded = true

[build]
include_config_on_deploy = true
automatically_update_urls_on_dev = true

[auth]
redirect_urls = [
  "https://tripleform-cod-order-upsells.onrender.com/auth/callback",
  "https://tripleform-cod-order-upsells.onrender.com/auth/shopify/callback",
  "https://tripleform-cod-order-upsells.onrender.com/api/auth/callback"
]

# ðŸ”´ OBLIGATOIRE POUR LES WEBHOOKS (HMAC + RGPD)
[webhooks]
api_version = "2024-10"

# Webhooks applicatifs + RGPD (UN SEUL ENDPOINT)
[[webhooks.subscriptions]]
topics = [
  "APP_UNINSTALLED",
  "APP_SCOPES_UPDATE"
]

compliance_topics = [
  "CUSTOMERS_DATA_REQUEST",
  "CUSTOMERS_REDACT",
  "SHOP_REDACT"
]

uri = "/webhooks"

[access_scopes]
scopes = "read_products, write_products, read_orders, read_customers, write_draft_orders, read_content, write_content"

[app_proxy]
url = "https://tripleform-cod-order-upsells.onrender.com"
subpath = "tripleform-cod"
prefix = "apps"

# Optionnel : POS
[pos]
embedded = false
