# Learn more about configuring your app at
# https://shopify.dev/docs/apps/tools/cli/configuration

name = "TripleForm COD Order - Upsells"
client_id = "ac6bf0c04b992f852be8538ab90a4691"
handle = "tripleform-cod"

# Obligatoire
application_url = "https://tripleform-cod-order-upsells.onrender.com"
embedded = true

[build]
automatically_update_urls_on_dev = true
include_config_on_deploy = true

[auth]
redirect_urls = [
  "https://tripleform-cod-order-upsells.onrender.com/auth/callback",
  "https://tripleform-cod-order-upsells.onrender.com/auth/shopify/callback",
  "https://tripleform-cod-order-upsells.onrender.com/api/auth/callback"
]

# =========================
# WEBHOOKS (VERSION SAINE)
# =========================
[webhooks]
api_version = "2024-10"

# ðŸ”¹ App uninstall
[[webhooks.subscriptions]]
topics = [ "app/uninstalled" ]
uri = "https://tripleform-cod-order-upsells.onrender.com/webhooks/app/uninstalled"

# ðŸ”¹ Scopes update
[[webhooks.subscriptions]]
topics = [ "app/scopes_update" ]
uri = "https://tripleform-cod-order-upsells.onrender.com/webhooks/app/scopes_update"

# ðŸ”¹ RGPD / Compliance
[[webhooks.subscriptions]]
uri = "https://tripleform-cod-order-upsells.onrender.com/webhooks/compliance"
compliance_topics = [
  "customers/data_request",
  "customers/redact",
  "shop/redact"
]

# =========================
# SCOPES
# =========================
[access_scopes]
scopes = "read_products,write_products,read_orders,read_customers,write_draft_orders,read_content,write_content"

# =========================
# APP PROXY
# =========================
[app_proxy]
url = "https://tripleform-cod-order-upsells.onrender.com"
subpath = "tripleform-cod"
prefix = "apps"

# =========================
# POS (optionnel)
# =========================
[pos]
embedded = false
